!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):(e="undefined"!=typeof globalThis?globalThis:e||self).SchemaForm=n(e.$)}(this,(function(e){"use strict";function n(n,a){var t=e("<label></label>").text(n);return e("<div class='border-b py-1 flex items-start gap-1'></div>").append(t).append(a)}function a(o,c,r){var l,u;void 0===c&&(c="");var p=c?"".concat(c,".").concat(o.name):o.name;switch(o.type){case"string":case"number":case"date":case"color":case"file":case"range":u=e('<input type="'.concat(o.type,'" name="').concat(p,'" class="border rounded p-1" />')),void 0!==o.initialValue&&u.val(o.initialValue),r&&u.on("input",(function(e){r(p,u.val(),e)}));break;case"boolean":(u=e('<input type="checkbox" name="'.concat(p,'" class="mt-2"/>'))).prop("checked",!0===o.initialValue),r&&u.on("input",(function(e){r(p,u.is(":checked"),e)}));break;case"enum":u=e('<div class="inline-flex flex-wrap"></div>'),o.options.forEach((function(n){var a=e("<input>",{type:"radio",name:p,value:n.value,class:"mr-1.5"});n.value===o.initialValue&&a.prop("checked",!0),a.on("input",(function(e){null==r||r(p,n.value,e)}));var t=e("<label class='mr-4'>").append(a).append(document.createTextNode(n.label));e(u).append(t)}));break;case"select":u=e('<select name="'.concat(p,'" class="border rounded p-1"></select>')),o.multiSelect&&u.attr("multiple","multiple"),o.options.forEach((function(n){var a,t=e('<option value="'.concat(n.value,'">').concat(n.label,"</option>"));(null===(a=o.initialValue)||void 0===a?void 0:a.includes(n.value))&&t.prop("selected",!0),u.append(t)})),r&&u.on("input",(function(n){var a=e(n.currentTarget).val();r(p,a,n)}));break;case"array":u=e("<div class='array-input border p-2'></div>");var d=e("<button type='button' class='bg-blue-500 text-white px-2 py-1 rounded my-1'>新增</button>").on("click",(function(){var n=t(o,p,r,u.children(".array-item").length);u.append(n),r&&r(p,i(u),e.Event("add"))}));u.append(d),o.initialValue&&o.initialValue.forEach((function(e,n){var a=t(o,p,r,n);u.append(a)}));break;case"object":u=e("<div class='border p-2'></div>"),null===(l=o.children)||void 0===l||l.forEach((function(e){u.append(n(e.label+": ",a(e,p,r)))}));break;default:u=e('<input name="'.concat(p,'" class="border rounded p-1" />')),r&&u.on("input",(function(e){r(p,u.val(),e)}))}return u}function t(t,o,c,r){var l,u=e("<div class='array-item border p-2 mb-2 flex items-center gap-1'></div>"),p="".concat(o,"[").concat(r,"]"),d=e("<div class='item-inner flex-grow'></div>");null===(l=t.children)||void 0===l||l.forEach((function(e){d.append(n(e.label+": ",a(e,p,c)))}));var s=e("<button type='button' class='bg-red-500 text-white px-2 py-1 rounded my-1'>删除</button>").on("click",(function(){u.remove(),c&&c(o,i(u.parent()),e.Event("remove"))}));return u.append(d).append(s),u}function i(n){var a=[];return n.find(".array-item").each((function(n,t){var i={};e(t).find("input, select").each((function(n,a){var t,o,c=null!==(o=null===(t=e(a).attr("name"))||void 0===t?void 0:t.split(".").pop())&&void 0!==o?o:"",r=e(a).val();"checkbox"===e(a).attr("type")?i[c]=e(a).is(":checked"):i[c]=r})),a.push(i)})),a}return function(t){var i,o=t.formSchema,c=t.onChange,r=e("<form></form>");return null===(i=null==o?void 0:o.inputs)||void 0===i||i.forEach((function(e){var t=a(e,"",c),i=n(e.label+": ",t);r.append(i)})),r}}));
